
<!DOCTYPE html>
<html lang="zh_CN" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>希尔排序和快速排序 - EdsionGu的博客</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="前端,"> 
    <meta name="description" content="断剑重铸之日，骑士归来之时,希尔排序
希尔排序的工作原理是，通过定义一个间隔序列来表示在排序过程中进行比较的元素之
间有多远的间隔。我们可以动态定义间隔序列，不过对于大部分的实际应用场景，算法
要用到的间隔序列可以提前定义好。,"> 
    <meta name="author" content="Edsion Gu"> 
    <link rel="alternative" href="atom.xml" title="EdsionGu的博客" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

    
<link rel="stylesheet" href="/css/diaspora.css">

	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-8691406134231910",
              enable_page_level_ads: true
         });
    </script>
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
<meta name="generator" content="Hexo 4.2.0"></head>

<body class="loading">
    <span id="config-title" style="display:none">EdsionGu的博客</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="iconfont icon-home image-icon" href="javascript:;" data-url="http://edsion11.github.io"></a>
    <div title="播放/暂停" class="iconfont icon-play"></div>
    <h3 class="subtitle">希尔排序和快速排序</h3>
    <div class="social">
        <div>
            <div class="share">
                <a title="获取二维码" class="iconfont icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">希尔排序和快速排序</h1>
        <div class="stuff">
            <span>三月 27, 2020</span>
            
  <ul class="post-tags-list" itemprop="keywords"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/%E9%AB%98%E7%BA%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" rel="tag">高级排序算法</a></li></ul>


        </div>
        <div class="content markdown">
            <h4>希尔排序</h4>
<p>希尔排序的工作原理是，通过定义一个间隔序列来表示在排序过程中进行比较的元素之
间有多远的间隔。我们可以动态定义间隔序列，不过对于大部分的实际应用场景，算法
要用到的间隔序列可以提前定义好。有一些公开定义的间隔序列，使用它们会得到不同
的结果。在这里我们用到了 Marcin Ciura 在他 2001 年发表的论文“Best Increments for the
Average Case of Shell Sort”（http:bit.ly/1b04YFv,2001）中定义的间隔序列。这个间隔序列
是：701, 301, 132, 57, 23, 10, 4, 1。</p>
<h6>首先是希尔排序的js写法</h6>
<pre><code >
var arr=[2,3,5,6,2,1,5,123,34,5,66,3,4,2,43,52,45,47,48]
var gaps=[5,3,1]
function shellSort(arr,gaps){
  for(let g=0;g<gaps.length;++g){
    for(let i=0;i<arr.length;++i){
      var temp = arr[i]
      for(var j=i;j>=gaps[g]&&arr[j-gaps[g]]>temp;j-=gaps[g]){
        arr[j]=arr[j-gaps[g]]
      }
      arr[j]=temp
    }
  }
}
</code></pre>
<h6>实际就是:</h6>
<p>外循环控制间隔序列的移动。也就是说，算法在第一次处理数据集时，会检查所有间隔为
5 的元素。下一次遍历会检查所有间隔为 3 的元素。最后一次则会对间隔为 1 的元素，也
就是相邻元素执行标准插入排序。在开始做最后一次处理时，大部分元素都将在正确的位
置，算法就不必对很多元素进行交换。这就是希尔排序比插入排序更高效的地方。图 12-3
演示了如何使用间隔序列为 5, 3, 1 的希尔排序算法，对一个包含 10 个随机数字的数据集
合进行排序。
</p>
原理图如下：
<image src="/images/希尔排序原理.png"></image>
<h6>计算动态间隔序列</h6>

<p>《算法（第 4 版）》（人民邮电出版社）的合著者 Robert Sedgewick 定义了一个 shellsort()
函数，在这个函数中可以通过一个公式来对希尔排序用到的间隔序列进行动态计算。
Sedgewick 的算法是通过下面的代码片段来决定初始间隔值的：</p>

<pre><code>
var N = this.dataStore.length;
var h = 1;
while (h < N/3) {
  h = 3 * h + 1;
}
</code></pre>
<p>间隔值确定好后，这个函数就可以像之前定义的 shellsort() 函数一样运行了，唯一的区<br>别是，回到外循环之前的最后一条语句会计算一个新的间隔值：</p>
<pre><code>
h = 3 * h + 1
</code></pre>
<h6>举例如下:</h6>

<pre><code>

function shellSort (arr){
  var N = arr.length;
  var h = 1;
  while(h<N/3){
    h = h * 3 + 1;
  }
  while(h>=1){
    for(var i=h;i<N;i++){
      for(j=i;j > = h && arr[j] < arr[j-h];j-=h){
        var temp = arr[j-h]
        arr[j-h]=arr[j]
        arr[j] = temp
      }
    }
    h=(h-1)/3
  }
}
</code></pre>
<p>在运算时间上，前后两个算法相差一个while()循环来取gaps[]值，前者设定了[5,3,1],后者通过计算得到gaps数组。</p>
<h4>快速排序</h4>
快速排序是处理大数据集最快的排序算法之一，它是一种分而治之的算法，通过递归的方式将数据分解为包含较小元素和较大元素的不同子序列
这个算法首先要在列表中选择一个元素作为基准值（pivot）。数据排序围绕基准值进行，将列表中小于基准值的元素移到数组的底部，将大于基准值的元素移到数组的顶部。
如图所示：
<image src="/images/快速排序.jpg"></image>
<pre><code>
function QuickSort(arr) {
  if (arr.length == 0) return []
  var left = []
  var right = []
  var pivot = arr[0]
  for (let i = 1; i < arr.length; i++) {//此处留意i=1
    if (arr[i] < pivot) {
      left.push(arr[i])
    } else {
      right.push(arr[i])
    }
  }
  return QuickSort(left).concat(pivot, QuickSort(right))
}
</code></pre>
以下获取每次循环的输出，解释了快速排序的运行原理。
<pre><code>
9,3,93,9,65,94,50,90,12,65
基准值：9 当前元素：3
移动 3 到左边
基准值：9 当前元素：93
移动 93 到右边
基准值：9 当前元素：9
移动 9 到右边
基准值：9 当前元素：65
移动 65 到右边
基准值：9 当前元素：94
移动 94 到右边
基准值：9 当前元素：50
移动 50 到右边
基准值：9 当前元素：90
移动 90 到右边
基准值：9 当前元素：12
移动 12 到右边
基准值：9 当前元素：65
移动 65 到右边
基准值：93 当前元素：9
移动 9 到左边
基准值：93 当前元素：65
移动 65 到左边
基准值：93 当前元素：94
移动 94 到右边
基准值：93 当前元素：50
移动 50 到左边
基准值：93 当前元素：90
移动 90 到左边
基准值：93 当前元素：12
移动 12 到左边
基准值：93 当前元素：65
移动 65 到左边
基准值：9 当前元素：65
移动 65 到右边
基准值：9 当前元素：50
移动 50 到右边
基准值：9 当前元素：90
移动 90 到右边
基准值：9 当前元素：12
移动 12 到右边
基准值：9 当前元素：65
移动 65 到右边
基准值：65 当前元素：50
移动 50 到左边
基准值：65 当前元素：90
移动 90 到右边
排序算法 ｜ 167
基准值：65 当前元素：12
移动 12 到左边
基准值：65 当前元素：65
移动 65 到右边
基准值：50 当前元素：12
移动 12 到左边
基准值：90 当前元素：65
移动 65 到左边
3,9,9,12,50,65,65,90,93,94
</code></pre>
本次文章到此结束
            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="true">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title='0' data-url='http://music.163.com/song/media/outer/url?id=562598065.mp3'></li>
                        
                    
                        
                            <li title='1' data-url='http://music.163.com/song/media/outer/url?id=28188425.mp3'></li>
                        
                    
                        
                            <li title='2' data-url='http://music.163.com/song/media/outer/url?id=534542079.mp3'></li>
                        
                    
                        
                            <li title='3' data-url='http://music.163.com/song/media/outer/url?id=30352891.mp3'></li>
                        
                    
                        
                            <li title='4' data-url='http://music.163.com/song/media/outer/url?id=28138493.mp3'></li>
                        
                    
                        
                            <li title='5' data-url='http://music.163.com/song/media/outer/url?id=421137682.mp3'></li>
                        
                    
                        
                            <li title='6' data-url='http://music.163.com/song/media/outer/url?id=208902.mp3'></li>
                        
                    
                        
                            <li title='7' data-url='http://music.163.com/song/media/outer/url?id=1363948882.mp3'></li>
                        
                    
                        
                            <li title='8' data-url='http://music.163.com/song/media/outer/url?id=574566207.mp3'></li>
                        
                    
                        
                            <li title='9' data-url='http://music.163.com/song/media/outer/url?id=1330348068.mp3'></li>
                        
                    
                        
                            <li title='10' data-url='http://music.163.com/song/media/outer/url?id=26418130.mp3'></li>
                        
                    
                </ul>
            
        </div>
        
    <div id='gitalk-container' class="comment link"
		data-enable='true'
        data-ae='true'
        data-ci='93c58aa54b696342afaa'
        data-cs='e593ee984f8640ebaed460b4b0bcc71c6d36289d'
        data-r='github.com/gittalk'
        data-o=''
        data-a='edsion11'
        data-d='false'
    >查看评论</div>


    </div>
    
        <div class='side'>
			<ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#"><span class="toc-number">1.</span> <span class="toc-text">希尔排序</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#"><span class="toc-number">1.0.1.</span> <span class="toc-text">首先是希尔排序的js写法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#"><span class="toc-number">1.0.2.</span> <span class="toc-text">实际就是:</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#"><span class="toc-number">1.0.3.</span> <span class="toc-text">计算动态间隔序列</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#"><span class="toc-number">1.0.4.</span> <span class="toc-text">举例如下:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#"><span class="toc-number">2.</span> <span class="toc-text">快速排序</span></a></li></ol>	
        </div>
    
</div>


    </div>
</div>
</body>

<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>


<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/typed.js"></script>
<script src="/js/diaspora.js"></script>


<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">


<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>



<script type="text/x-mathjax-config">
    MathJax.Hub.Config({"HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"], linebreaks: { automatic:true }, EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50) },
        tex2jax: { inlineMath: [ ["$", "$"], ["\\(","\\)"] ], processEscapes: true, ignoreClass: "tex2jax_ignore|dno",skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']},
        TeX: {  noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } }, Macros: { href: "{}" } },
        messageStyle: "none"
    });
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>




</html>
